---
---
title: js
categories: [网页测试]
abbrlink: 22366
date: 2019-12-18 22:40:19
---
[Overview](https://mp.csdn.net/)
# [js](https://vjudge.net/problem/OpenJ_Bailian-1000)
AJAX
```js
function success(text){
	var textarea=document.getElementById('test-response-text');
	textarea.value=text;
}
function fail(code){
	var textarea=document.getElementById('test-response-text');
	textarea.value='Error code' + code;
}
if(window.XMLHttpRequest){
	var request= new XMLHttpRequest();
}else{
	var request=new ActionXObject('microsoft.XMLHTTP');
}
request.onreadystatechange=function(){
	if(request.readyState===4){
		if(request.status===200){
			return success(request.responseText);
		}else{
			return fail(request.status);
		}
	}else{
		//HTTP请求中
	}
}
request.open('Get','/api/categories');
request.send();

```
```txt
关于网络请求：
1.通过检测window对象是否有XMLHttpRequest属性来确定浏览器是否支持标准的XMLHttpRequest;
2.创建XMLHttpRequest对象后，先设置onreadystatechange的回调函数，在回调函数中，通过readyState===4判断请求是否完成；
3.XMLHttpRequest的open()方法含有三个参数open(method,url,async),第三个参数默认为true;
4.send()方法发送请求，若method为'GET'不需要参数,若为'POST',需要把body部分以字符串或FormData对象传进去。
5.!import js在发送AJAX请求时，URL域名必须与当前页面完全一致(同源策略);
	请求外域方法：
			(1)通过Flash发送HTTP请求(绕过浏览器的安全限制,缺点是必须安装flash)
			(2)通过在同源域名下架设一个代理服务器来转发，js负责把请求发送到代理服务器('/proxy?url=http:www.sina.com.cn')，代理服务器再把结果返回(缺点：需要服务器额外做开发)
			(3)JSONP(缺点：只能用GET请求，并且要求返回js),利用浏览器允许跨域引用js资源
					<html>
						<head>
						 <script src="http://example.com/abc.js"></script>
						  ...
						</head>
						<body>
							...
						</body>
					</html>
				JSONP通常以函数调用形式返回(foo('data'))
				我们如果在页面先准备好foo()函数，然后给页面加一个<script>节点，相当于动态读取外域的js资源
			(4)CORS(浏览器需要支持HTML5)


```